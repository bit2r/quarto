---
format: 
  revealjs:
    theme: ["simple", "theme/q-theme.scss"]
    slide-number: c/t
    logo: "../fig/koRea_logo.png"
    footer: "[한국 R 사용자회](https://r2bit.com/)&nbsp;"
    code-copy: true
    center-title-slide: false
    include-in-header: heading-meta.html
    code-link: true
    code-overflow: wrap
    highlight-style: a11y
    height: 1080
    width: 1920
    smaller: true
    scrollable: true    
execute: 
  eval: true
  echo: true
  freeze: auto  
editor_options: 
  chunk_output_type: console
---

{{< include title-slide.qmd >}}

<!-- {{< include data-science.qmd >}} -->

<!-- ## {background-image="../fig/slide-end.png" background-size="contain"} -->

## {auto-animate=true}

::: {style="margin-top: 100px; color: black"}
데이터 사이언스
:::

## {auto-animate=true}

::: {style="margin-top: 300px; font-size: 5em; color: black;"}
데이터 사이언스
:::

## 데이터 사이언스

![](../fig/horst-eco-r4ds.png)

## 데이터 사이언스 - 출판

::: panel-tabset
### 문제점

![문제점](../fig/single-sourcing-problem.jpg){#fig-problem width="50%"}

### 개념

![Single Sourcing 개념](../fig/single-sourcing-concept.jpg){#fig-concept width="50%"}

### Single Sourcing Multi-Use

![Single Sourcing Multi-Use](../fig/single-sourcing-publishing.jpg){#fig-publishing width="60%"}
:::

## Quarto

::: panel-tabset
### R

![](../fig/quarto_workflow/rmd-knitr.png)

### 파이썬

![](../fig/quarto_workflow/jupyter-alone.png)

### Quarto: R

![](../fig/quarto_workflow/qmd-knitr.png)

### Quarto: 파이썬

![](../fig/quarto_workflow/qmd-jupyter.png)
:::


## 시각화 - 그래프 문법 ^[Comparing ggplot2 and R Base Graphics By [Nathan Yau](https://flowingdata.com/2016/03/22/comparing-ggplot2-and-r-base-graphics/)]

::: {.panel-tabset}

<!-- 데이터  -->
:::: columns

::: {.column}

### R 코드

```{r}
library(tidyverse)
bill_df <- data.frame(
  sex = factor(c("여성","여성","남성","남성")),
  time = factor(c("점심","저녁","점심","저녁"), levels=c("점심","저녁")),
  total_bill = c(13.53, 16.81, 16.24, 17.42)
)
```
:::

::: {.column}
### 실행결과
```{r}
bill_df
```
:::

::::


<!-- ggplot -->
::: {.columns}

::: {.column}

### R 코드

```{r}
#| eval: false
bill_df %>% 
  ggplot(aes(x=time, y=total_bill, group=sex, shape=sex, colour=sex)) +
    geom_line(aes(linetype=sex), size=1) +    
    geom_point(size=3, fill="white") +        
    expand_limits(y=0) +                      
    scale_colour_hue(name="결재자 성별", l=30) +
    scale_shape_manual(name="결재자 성별", values=c(22,21)) +
    scale_linetype_discrete(name="결재자 성별") +
    xlab("점심, 석식") + ylab("팁(Tip)") +
    ggtitle("식사 결재 평균 팁") +    
    theme_bw() +
    theme(legend.position=c(.7, .4))

```
:::

::: {.column}
### 실행결과
```{r}
#| echo: false
bill_df %>% 
  ggplot(aes(x=time, y=total_bill, group=sex, shape=sex, colour=sex)) +
    geom_line(aes(linetype=sex), size=1) +    
    geom_point(size=3, fill="white") +        
    expand_limits(y=0) +                      
    scale_colour_hue(name="결재자 성별", l=30) +
    scale_shape_manual(name="결재자 성별", values=c(22,21)) +
    scale_linetype_discrete(name="결재자 성별") +
    xlab("점심, 석식") + ylab("팁(Tip)") +
    ggtitle("식사 결재 평균 팁") +    
    theme_bw() +
    theme(legend.position=c(.7, .4))
```
:::

:::

<!-- Base R -->

::: {.columns}

::: {.column}

### R 코드

```{r}
#| eval: false
bill_mat <- matrix( bill_df$total_bill,
                   nrow = 2,
                   byrow=TRUE,
                   dimnames = list(c("여성", "남성"), c("점심", "저녁"))
                   )

mf_col <- c("#3CC3BD", "#FD8210")
barplot(bill_mat, beside = TRUE, border=NA, col=mf_col)
legend("topleft", row.names(bill_mat), pch=15, col=mf_col)


par(cex=1.2, cex.axis=1.1)
matplot(bill_mat, type="b", lty=1, pch=19, col=mf_col,
    cex=1.5, lwd=3, las=1, bty="n", xaxt="n",
    xlim=c(0.7, 2.2), ylim=c(12,18), ylab="",
    main="식사 결재 평균 팁", yaxt="n")
axis(2, at=axTicks(2), labels=sprintf("$%s", axTicks(2)),
    las=1, cex.axis=0.8, col=NA, line = -0.5)
grid(NA, NULL, lty=3, lwd=1, col="#000000")
abline(v=c(1,2), lty=3, lwd=1, col="#000000")
mtext("점심", side=1, at=1)
mtext("저녁", side=1, at=2)
text(1.5, 17.3, "남성", srt=8, font=3)
text(1.5, 15.1, "여성", srt=33, font=3)


```
:::

::: {.column}
### 실행결과
```{r}
#| echo: false
bill_mat <- matrix( bill_df$total_bill,
                   nrow = 2,
                   byrow=TRUE,
                   dimnames = list(c("여성", "남성"), c("점심", "저녁"))
                   )

mf_col <- c("#3CC3BD", "#FD8210")

par(cex=1.2, cex.axis=1.1)
matplot(bill_mat, type="b", lty=1, pch=19, col=mf_col,
    cex=1.5, lwd=3, las=1, bty="n", xaxt="n",
    xlim=c(0.7, 2.2), ylim=c(12,18), ylab="",
    main="식사 결재 평균 팁", yaxt="n")
axis(2, at=axTicks(2), labels=sprintf("$%s", axTicks(2)),
    las=1, cex.axis=0.8, col=NA, line = -0.5)
grid(NA, NULL, lty=3, lwd=1, col="#000000")
abline(v=c(1,2), lty=3, lwd=1, col="#000000")
mtext("점심", side=1, at=1)
mtext("저녁", side=1, at=2)
text(1.5, 17.3, "남성", srt=8, font=3)
text(1.5, 15.1, "여성", srt=33, font=3)

```
:::

:::

:::


## `dplyr` - 데이터 문법



